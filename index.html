<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">  
  <script src="resources/scripts/jquery-ui.min.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="resources/stylesheets/jquery-ui.min.css" />
  <link rel="stylesheet" type="text/css" href="resources/stylesheets/jquery-ui.theme.min.css" />
  <link rel="stylesheet" type="text/css" href="resources/stylesheets/jquery-ui.structure.min.css" />          
  <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
      rel="stylesheet" />
            <title>AFCEM Certificate Repository</title>>
</head>

<body>
           <div id="dialog-message" title="Under Construction!" style="display: none; color: black;">
                <p>
                    <span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 50px 0"></span>
                    <span id="alert-msg" style="text-align: left;"></span>
                </p>
            </div>
            <div id="dialog-feedback" title="Under Construction!" style="display: none; z-index: 1000">
                <div>Provide disapproval feedback.</div>
                <textarea id="feedback" style="width: 100%" rows="5"></textarea>
            </div>
            <div id="error-message" title="Error Message!" style="display: none">
                <p>
                    <span class="ui-icon ui-icon-alert" style="float: left; margin: 0 7px 5px 0"></span>
                    <span>An error occurred. Please try your request again. If this error
                        persists, notify the EM Dashboard Administration Team.</span>
                </p>
                <p id="error_page"></p>
                <p id="error_function"></p>
                <p id="error_msg"></p>
            </div>

            <div id="blanket" style="
                background-color: #002df5;
                background: radial-gradient(circle,rgba(0, 45, 245, 1) 64%, rgba(8, 22, 71, 1) 100%);
                color: ghostwhite;
                display: flex;
                justify-content: center;
                align-items: center;                
                cursor: wait;
                width: 100%;
                height: 100%;
                position: absolute;
                top: 0;
                left: 0;
                font-family: 'Lato';
                font-size: 1.75rem;
                font-weight: 700;
                z-index: 10;
            ">
                <div id="loader">
                    <h1>Retrieving Certifications...</h1>
                    <div class="spinner"></div>
                </div>

            </div>

            <div id="page" style="display: none;">
                <div id="banner_area">
                    <div id="banner">AFCEM Certificate Repository</div>
                </div>

                <div id="controls" class="control-panel">
                    <div id="filter-container">
                        <input type="text" id="searchInput" placeholder="Search Recipients..."
                            style="padding: 8px 12px; border: 1px solid #ddd; width: 250px; border-radius: 4px;">
                        <button id="searchButton" class="filter-btn" onclick="applyFilter()">Search</button>
                        <button id="clearButton" class="filter-btn" onclick="clearSearchFilter()">Clear</button>
                    </div>
                </div>

                <div id="cert_list" class="container">
                    <div class="btn-container">
                        <button id="admin-btn" onclick="showAddCertDiv()">Award Certification</button>
                        <button id="renew-btn" onclick="showRenewDiv()">AFCEM Renewal</button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th id="member" class="sort" onclick="sortRecipients()">Recipient</th>
                                <th id="award" class="sort" onclick="sortCertification()">Certification</th>
                                <th id="date" class="sort" onclick="sortDate()">Valid</th>
                                <th>Renewal Due</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>

                        </tbody>
                    </table>
                </div>

                <div id="add_cert" class="container" style="display: none;">
                    <div class="btn-container">
                        <button id="back-btn" onclick="hideAddCertDiv()">Certificate List</button>
                    </div>
                    <div class="form-group">
                        <label for="bestow_mem">Awarded To:</label>
                        <select id="bestow_mem" class="form-control" onchange="selectCertType()">
                            <option value="" disabled selected>Loading...</option>
                        </select>
                        <div class="loading-spinner" id="loading">
                            <div class="spinner" id="sel_spinner"></div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="certificateType">Certificate Type:</label>
                        <select id="certificateType" class="form-control" disabled onchange="newAwardDate()">
                            <option value="" disabled selected>Select certificate type</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="awardDate">Date Awarded:</label>
                        <input type="text" id="awardDate" class="form-control" style="width: 20%;" disabled>
                    </div>
                    <div class="form-group">
                        <label for="certificateFile">Upload Certificate (PDF only):</label>
                        <div class="file-drop-area">
                            <div class="upload-area" id="uploadArea" ondrop="dropHandler(event);"
                                ondragover="dragOverHandler(event);" ondragleave="dragOut();">
                                <div class="upload-icon"><span class="material-symbols-outlined"
                                        style="font-size: 48px;">
                                        upload_file
                                    </span>
                                </div>
                                <div id="file-area">
                                    <p>Drag and drop your certificate here or click to browse</p>
                                    <input type="file" id="certificateFile" accept=".pdf" style="display: none;">
                                    <p class="form-text">PDF format only</p>
                                    <button type="button" class="browse-btn" id="browseBtn"
                                        onclick="browseFile(event)">Browse</button>
                                </div>
                                <div id="file-info" style="display: none;">
                                    <!-- placeholder for certificate(pdf doc title)-->
                                </div>
                            </div>
                        </div>
                    </div>
                    <button id="submit" class="btn btn-primary" onclick="submitCertificate()" disabled>Upload
                        Certificate</button>
                </div>

                <div id="renewal_container" class="container" style="display: none;">
                    <div class="btn-container">
                        <button id="back-to-list-btn" class="btn btn-secondary" onclick="hideRenewalDiv()">Certificate
                            List</button>
                    </div>
                    <h2>Renew AFCEM Certificate</h2>
                    <div class="form-group">
                        <label for="renewal_mem_select">Select Member:</label>
                        <select id="renewal_mem_select" class="form-control" onchange="selectRenewMem()">                            
                            <!-- Options will be populated dynamically -->
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="renewal_date">Date Renewed:</label>
                        <input type="text" id="renewal_date" class="form-control" style="width: 20%;" disabled>
                    </div>
                    <div class="form-group">
                        <label for="renewal_cert_file">Upload New Certificate (PDF only):</label>
                        <div class="file-drop-area">
                            <div class="upload-area" id="renewalUploadArea" ondrop="renewalDropHandler(event);"
                                ondragover="dragOverHandler(event);" ondragleave="dragOut();">
                                <div class="upload-icon"><span class="material-symbols-outlined"
                                        style="font-size: 48px;">upload_file</span></div>
                                <div id="renewal-file-area">
                                    <p>Drag and drop your certificate here or click to browse</p>
                                    <input type="file" id="renewal_cert_file" accept=".pdf" style="display: none;">
                                    <p class="form-text">PDF format only</p>
                                    <button type="button" class="browse-btn" onclick="browseRenewal(event)">Browse</button>
                                </div>
                                <div id="renewal-file-info" style="display: none;">
                                    <!-- placeholder for new certificate PDF title -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <button id="submit_renewal" class="btn btn-primary" onclick="submitRenewal()" disabled>Upload
                        Renewal</button>
                </div>

                <!-- details -->
                <div id="details_container" class="container" style="display: none; border-radius: 4px;">
                    <div class="btn-container">
                        <button id="close-btn" class="btn btn-secondary" onclick="closeDetails()">Certificate
                            List</button>
                    </div>
                    <div class="main">
                        
                    </div>
                </div>


            </div>

            <script src="script.js">
            </script>
        </body>

</html>
